webpackJsonp([3],{"58GW":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("eoV1"),a=i("XyMi");var s=function(t){i("o2aX")},o=Object(a.a)(n.a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"wallContainer",staticClass:"wall-container container-fluid"},[i("div",{staticClass:"container"},[i("div",[i("button",{staticClass:"btn btn-default",staticStyle:{color:"#555"},on:{click:function(e){t.newStickyNote()}}},[i("span",{staticClass:"glyphicon glyphicon-pencil"}),t._v(" 贴纸条\n            ")])]),t._v(" "),t._l(t.stickNoteList,function(e,n){return[i("div",{key:n,staticClass:"sticky-note col-sm-3",on:{click:function(i){t.openStickyNote(e)}}},[i("h4",{staticStyle:{height:"10%"}},[t._v(t._s(e.title))]),t._v(" "),i("h5",{staticStyle:{height:"10%"}},[t._v(t._s(e.name))]),t._v(" "),i("h5",{staticStyle:{height:"60%"}},[t._v(t._s(e.intro))]),t._v(" "),i("h5",{staticClass:"text-right"},[t._v(t._s(e.createdAt))])]),t._v(" "),t.token?i("li",{key:n,staticClass:"btn btn-primary",staticStyle:{background:"black"}},[t._m(0,!0),t._v(" "),i("ul",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[i("li",[i("a",{on:{click:function(i){t.commonHandle(e,"delete")}}},[t._v("\n                            删除\n                        ")]),t._v(" "),i("a",{on:{click:function(i){t.commonHandle(e,"hide")}}},[t._v("\n                            隐藏\n                        ")])])])]):t._e()]})],2),t._v(" "),i("div",{ref:"stickModal",staticClass:"modal fade in",attrs:{id:"new-stickyNote",tabindex:"-1",role:"dialog","aria-labelledby":"gridModalLabel"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-body"},[i("button",{staticClass:"close",attrs:{"data-dismiss":"modal"}},[t._v("×")]),t._v(" "),i("div",{staticClass:"stickyNote-content-top"},[i("div",{staticClass:"form-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.stickyNote.title,expression:"stickyNote.title"}],staticClass:"hidden-input",staticStyle:{"font-size":"30px"},attrs:{type:"text",title:"标题",placeholder:t.isReadOnly?"":"请输入你的标题","data-field":"标题",readonly:t.isReadOnly},domProps:{value:t.stickyNote.title},on:{input:function(e){e.target.composing||t.$set(t.stickyNote,"title",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"form-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.stickyNote.name,expression:"stickyNote.name"}],staticClass:"hidden-input",attrs:{type:"text",title:"名称",placeholder:t.isReadOnly?"":"作者","data-field":"作者",readonly:t.isReadOnly},domProps:{value:t.stickyNote.name},on:{input:function(e){e.target.composing||t.$set(t.stickyNote,"name",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"form-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.stickyNote.intro,expression:"stickyNote.intro"}],staticClass:"hidden-input",attrs:{type:"text",title:"介绍",placeholder:t.isReadOnly?"":"简单介绍","data-field":"简单介绍",readonly:t.isReadOnly},domProps:{value:t.stickyNote.intro},on:{input:function(e){e.target.composing||t.$set(t.stickyNote,"intro",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"stickyNote-content-mid"},[i("div",{staticClass:"form-group"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.stickyNote.content,expression:"stickyNote.content"}],staticClass:"hidden-input require-input",staticStyle:{width:"100%"},attrs:{type:"text",title:"正文",placeholder:t.isReadOnly?"":"正文",rows:"10","data-field":"正文",readonly:t.isReadOnly},domProps:{value:t.stickyNote.content},on:{input:function(e){e.target.composing||t.$set(t.stickyNote,"content",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"stickyNote-content-bottom"},[i("div",{staticClass:"form-group text-center"},[i("h5",{staticClass:"text-right",staticStyle:{"font-weight":"100","font-family":"'微软雅黑'"}},[t._v(t._s(t.stickyNote.createdAt))]),t._v(" "),t.isReadOnly?t._e():i("button",{staticClass:"btn btn-success",staticStyle:{"font-weight":"100"},on:{click:function(e){t.submitStickyNote()}}},[t._v("贴上墙")])])])])])])]),t._v(" "),i("pagination",{attrs:{config:t.paginationConfig},on:{pageChange:t.pageChange}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"dropdown-toggle",staticStyle:{color:"white"},attrs:{"data-toggle":"dropdown"}},[this._v("\n                    操作\n                    "),e("span",{staticClass:"caret"})])}],!1,s,null,null);e.default=o.exports},eoV1:function(t,e,i){"use strict";(function(t){var n=i("Dd8w"),a=i.n(n),s=i("eKp+");e.a={name:"wall",computed:{token:function(){return this.$store.state.token}},components:{pagination:s.a},data:function(){return{paginationConfig:{page:1,pageSize:10,prevText:"前页",nextText:"后页",currentPage:1,totalPages:0},wallContainerRef:{},isReadOnly:!1,stickyNote:{title:"",name:"",anonymous:"",intro:"",content:"",createdAt:""},stickNoteList:[]}},mounted:function(){this.wallContainerRef=this.$refs.wallContainer,window.addEventListener("resize",this.countWindowHeight),this.getStickyNoteList(),this.countWindowHeight()},methods:{countWindowHeight:function(){var t=document.documentElement.clientHeight;this.wallContainerRef.style.height=t+"px"},openStickyNote:function(e){this.stickyNote=e,this.isReadOnly=!0,t("#new-stickyNote").modal("show")},newStickyNote:function(){t("#new-stickyNote").modal("show"),this.stickyNote={},this.isReadOnly=!1},submitStickyNote:function(){var e=this,i=this,n=!0;if(t(".require-input").each(function(t,e){if(""===e.content)return i.$swal(e.attributes["data-field"].value+"不能为空","","success"),n=!1,!1}),n){var a=this.stickyNote,s={name:a.name,title:a.title,intro:a.intro,content:a.content};this.$http.post("wall",s).then(function(i){e.$swal(i.detailMsg,"","success"),0==i.code&&(e.$set(e.paginationConfig,"currentPage",e.paginationConfig.totalPages),t("#new-stickyNote").modal("hide"),e.stickyNote={},e.getStickyNoteList())})}},getStickyNoteList:function(){var t=this;t.$http.post("wall/list",{page:t.paginationConfig.page,pageSize:t.paginationConfig.pageSize}).then(function(e){0==e.code&&(t.paginationConfig.totalPages=e.data.totalPages,t.stickNoteList=e.data.rows)})},commonHandle:function(t,e){var i=this,n="delete",s="wall/"+t.id,o=a()({},t);"delete"==e?n="delete":(n="put",o.show="0",o.include=["show"]),i.$http[n](s,o).then(function(t){i.$swal(t.detailMsg,"","success"),i.getStickyNoteList()})},pageChange:function(t){var e=this.paginationConfig;e.page=t,this.$router.push({query:{page:t,pageSize:e.pageSize}}),this.getStickyNoteList()}}}}).call(e,i("7t+N"))},o2aX:function(t,e){}});
//# sourceMappingURL=3.1b8b918c79d92d9f0b5a.js.map